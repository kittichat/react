{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\pentester\\\\react\\\\project\\\\project3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\pentester\\\\react\\\\project\\\\project3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\pentester\\\\react\\\\project\\\\project3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\pentester\\\\react\\\\project\\\\project3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\pentester\\\\react\\\\project\\\\project3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import CheckButton from\"react-validation/build/button\";import Form from\"react-validation/build/form\";import{isEmail}from'validator';import Input from'react-validation/build/input';import BookingService from'../../services/booking_service';import AuthService from'../../services/auth_service';// import \"../../css/CreateFormForMemberBk.css\"\nimport\"../../css/CreateForm.css\";// import \"../../css/CreateFormForMemberBk.css\"\nvar required=function required(value){if(!value){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\"},\"This field is required!\");}};var vemail=function vemail(value){if(!isEmail(value)){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\"},\"This is not a valid email;\");}};var name=function name(value){if(value.length===0||value.length>40){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\"},\"please fill in your name\");}};var phone=function phone(phoneno){// const check = /^\\d{10}$/;\nif(phoneno.length===0||phoneno.length>10){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\"},\"please fill in your phone number\");}};var CreateForm=/*#__PURE__*/function(_React$Component){_inherits(CreateForm,_React$Component);var _super=_createSuper(CreateForm);function CreateForm(props){var _this;_classCallCheck(this,CreateForm);_this=_super.call(this,props);_this.state={// Listofmember:[],\n// successful:false,\nbookingDetail2:[],name:\"\",email:\"\",phone:\"\",member:false,isSubmit:false,uuid:undefined,isSuccess:false,price:{}};// this.retrieveAllmember = this.retrieveAllmember.bind(this)\n_this.bookingInformation=_this.bookingInformation.bind(_assertThisInitialized(_this));_this.handleCreate=_this.handleCreate.bind(_assertThisInitialized(_this));_this.onChangename=_this.onChangename.bind(_assertThisInitialized(_this));_this.onChangeemail=_this.onChangeemail.bind(_assertThisInitialized(_this));_this.onChangephone=_this.onChangephone.bind(_assertThisInitialized(_this));_this.memberCheck=_this.memberCheck.bind(_assertThisInitialized(_this));_this.bookingVerfify=_this.bookingVerfify.bind(_assertThisInitialized(_this));return _this;}_createClass(CreateForm,[{key:\"componentDidMount\",value:function componentDidMount(){this.bookingInformation();this.memberCheck();}},{key:\"memberCheck\",value:function memberCheck(){var user=AuthService.getCurrentUser();// let user = document.cookie\nif(user){this.setState({member:true});}}},{key:\"bookingInformation\",value:function bookingInformation(){this.setState({bookingDetail2:this.props.bookingDetail});}},{key:\"onChangename\",value:function onChangename(e){this.setState({name:e.target.value});}},{key:\"onChangeemail\",value:function onChangeemail(e){this.setState({email:e.target.value});}},{key:\"onChangephone\",value:function onChangephone(e){this.setState({phone:e.target.value});}// **********************************************************************\n},{key:\"handleCreate\",value:function handleCreate(e){var _this2=this;e.preventDefault();this.form.validateAll();if(this.checkBtn.context._errors.length===0){BookingService.CourtBooking(this.state.bookingDetail2,this.state.name,this.state.email,this.state.phone,localStorage.getItem(\"date2\")).then(function(response){if(response.data.success==false){window.alert(\"Sorry, please check stage again\");window.location.reload();}_this2.setState({message:response.data.message,uuid:response.data.bookingid,// change this line \nprice:response.data.price,isSubmit:true});},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();_this2.setState({message:resMessage});});}}},{key:\"bookingVerfify\",value:function bookingVerfify(e){var _this3=this;e.preventDefault();this.form.validateAll();if(this.checkBtn.context._errors.length===0){BookingService.BookingVerify(this.state.uuid).then(function(response){_this3.setState({message:response.data.message// isSuccess:true,\n// Successful: true\n});window.location.reload();window.alert(\"Your booking is Successful\");},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();_this3.setState({// successful: false,\nmessage:resMessage});});}}},{key:\"render\",value:function render(){var _this4=this;console.log(this.state.uuid);var _this$state=this.state,member=_this$state.member,isSubmit=_this$state.isSubmit;return/*#__PURE__*/React.createElement(\"div\",null,isSubmit?/*#__PURE__*/ // something\n//  <h1>test</h1>\nReact.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form,{onSubmit:this.bookingVerfify,ref:function ref(c){_this4.form=c;}},/*#__PURE__*/React.createElement(\"div\",{className:\"price__details\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Please send your receipt to admin's LINE application\"),/*#__PURE__*/React.createElement(\"h1\",null,\"Total price\"),/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(\"pre\",null,\"Normal price          \",this.state.price.normal_price)),/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(\"pre\",null,\"Discount        \")),/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(\"pre\",null,\" Promotion Time      -\",this.state.price.discount_time)),/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(\"pre\",null,\" Group               -\",this.state.price.discount_member)),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"h1\",null,/*#__PURE__*/React.createElement(\"pre\",null,\"TOTAL                 \",this.state.price.pay))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{className:\"price__submit\",type:\"submit\"},\"Verify\")),/*#__PURE__*/React.createElement(CheckButton,{className:\"\",style:{display:\"none\"},ref:function ref(c){_this4.checkBtn=c;}}))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleCreate,ref:function ref(c){_this4.form=c;}},!member?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"Header__label\"},\"Name\"),/*#__PURE__*/React.createElement(Input,{className:\"form-control\",id:\"name\",value:this.state.name,onChange:this.onChangename// validations={[name]}\n})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"Header__label\"},\"Email address\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",className:\"form-control\",id:\"email\",placeholder:\"name@example.com\",value:this.state.email,onChange:this.onChangeemail//  validations= {[vemail]}\n})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"Header__label\"},\"Phone number\"),/*#__PURE__*/React.createElement(Input,{className:\"form-control\",id:\"phone\",placeholder:\"012-345-6789\",value:this.state.phone,onChange:this.onChangephone// validations={[phone]}\n}))):/*#__PURE__*/React.createElement(\"h1\",null,\"Booking Details\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"ul__booking\"},this.state.bookingDetail2&&this.state.bookingDetail2.map(function(detail){return/*#__PURE__*/React.createElement(\"li\",{className:\"li__booking\"},detail.time,\"  \",detail.column);})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{className:\"price__submit\",type:\"submit\"},\"Submit\")),/*#__PURE__*/React.createElement(CheckButton,{className:\"\",style:{display:\"none\"},ref:function ref(c){_this4.checkBtn=c;}}))));}}]);return CreateForm;}(React.Component);export default CreateForm;","map":{"version":3,"sources":["C:/Users/pentester/react/project/project3/src/booking/bookingModal/CreateForm.js"],"names":["React","CheckButton","Form","isEmail","Input","BookingService","AuthService","required","value","vemail","name","length","phone","phoneno","CreateForm","props","state","bookingDetail2","email","member","isSubmit","uuid","undefined","isSuccess","price","bookingInformation","bind","handleCreate","onChangename","onChangeemail","onChangephone","memberCheck","bookingVerfify","user","getCurrentUser","setState","bookingDetail","e","target","preventDefault","form","validateAll","checkBtn","context","_errors","CourtBooking","localStorage","getItem","then","response","data","success","window","alert","location","reload","message","bookingid","error","resMessage","toString","BookingVerify","console","log","c","normal_price","discount_time","discount_member","pay","display","map","detail","time","column","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\n\r\nimport CheckButton from \"react-validation/build/button\"\r\nimport Form from \"react-validation/build/form\"\r\nimport {isEmail} from 'validator'\r\nimport Input from 'react-validation/build/input'\r\n\r\nimport BookingService from '../../services/booking_service'\r\nimport AuthService from '../../services/auth_service'\r\n\r\n// import \"../../css/CreateFormForMemberBk.css\"\r\nimport \"../../css/CreateForm.css\"\r\n// import \"../../css/CreateFormForMemberBk.css\"\r\n\r\n  const required = value => {\r\n    if (!value){\r\n      return (\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          This field is required!\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  const vemail = value =>{\r\n    if  (!isEmail(value)){\r\n      return(\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          This is not a valid email;\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const name = value =>{\r\n    if (value.length === 0 || value.length > 40){\r\n      return (\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          please fill in your name \r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n    const phone = phoneno =>{\r\n      // const check = /^\\d{10}$/;\r\n    if (phoneno.length === 0 || phoneno.length > 10){\r\n      return (\r\n        <div className=\"alert alert-danger\" role=\"alert\">\r\n          please fill in your phone number\r\n        </div>\r\n      )\r\n  }\r\n}\r\nclass CreateForm extends React.Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      // Listofmember:[],\r\n  // successful:false,\r\n      bookingDetail2:[],\r\n      name:\"\",\r\n      email:\"\",\r\n      phone:\"\",\r\n      member:false,\r\n      isSubmit:false,\r\n      uuid:undefined,\r\n      isSuccess:false,\r\n      price:{},\r\n\r\n      \r\n    }\r\n\r\n    // this.retrieveAllmember = this.retrieveAllmember.bind(this)\r\n    this.bookingInformation = this.bookingInformation.bind(this)\r\n    this.handleCreate = this.handleCreate.bind(this)\r\n    this.onChangename = this.onChangename.bind(this)\r\n    this.onChangeemail = this.onChangeemail.bind(this)\r\n    this.onChangephone = this.onChangephone.bind(this)\r\n    this.memberCheck  = this.memberCheck.bind(this)\r\n    this.bookingVerfify = this.bookingVerfify.bind(this)\r\n  }\r\n\r\n\r\n\r\n    componentDidMount(){\r\n    \r\n       this.bookingInformation();\r\n       this.memberCheck()\r\n\r\n    }\r\n\r\n    memberCheck(){\r\n      let user = AuthService.getCurrentUser()\r\n      // let user = document.cookie\r\n      if(user){\r\n        this.setState({\r\n          member : true\r\n        })\r\n      }\r\n    }\r\n\r\n    bookingInformation(){\r\n    this.setState({\r\n      bookingDetail2: this.props.bookingDetail\r\n    })\r\n    }\r\n\r\n    onChangename(e){\r\n      this.setState({\r\n        name:e.target.value\r\n      })\r\n    }\r\n\r\n    onChangeemail(e){\r\n      this.setState({\r\n        email:e.target.value\r\n      })\r\n    }\r\n\r\n    onChangephone(e){\r\n      this.setState({\r\n        phone:e.target.value\r\n      })\r\n    }\r\n\r\n    \r\n\r\n// **********************************************************************\r\n    handleCreate(e){\r\n      e.preventDefault()\r\n      this.form.validateAll();\r\n\r\n\r\n      if(this.checkBtn.context._errors.length === 0){\r\n        BookingService.CourtBooking(\r\n          this.state.bookingDetail2,\r\n          this.state.name,\r\n          this.state.email,\r\n          this.state.phone,\r\n          localStorage.getItem(\"date2\"),\r\n        )\r\n        .then(\r\n          response => {\r\n            if(response.data.success == false){\r\n              window.alert(\"Sorry, please check stage again\")\r\n              window.location.reload()}\r\n            this.setState({\r\n              message: response.data.message,\r\n              uuid:response.data.bookingid, // change this line \r\n              price:response.data.price,\r\n              isSubmit : true,\r\n\r\n            })\r\n          },\r\n          error => {\r\n            const resMessage = \r\n            (error.response && \r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n              error.message ||\r\n              error.toString();\r\n              this.setState({\r\n                message: resMessage\r\n              })\r\n          }\r\n        )\r\n      }\r\n    }\r\n\r\n    bookingVerfify(e){\r\n      e.preventDefault()\r\n      this.form.validateAll();\r\n\r\n\r\n      if(this.checkBtn.context._errors.length === 0){\r\n        BookingService.BookingVerify(\r\n          this.state.uuid,\r\n        )\r\n        .then(\r\n          response => {\r\n            this.setState({\r\n              message: response.data.message,\r\n              // isSuccess:true,\r\n              // Successful: true\r\n            })\r\n            window.location.reload()\r\n            window.alert(\"Your booking is Successful\")\r\n          },\r\n          error => {\r\n            const resMessage = \r\n            (error.response && \r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n              error.message ||\r\n              error.toString();\r\n\r\n              this.setState({\r\n                // successful: false,\r\n                message: resMessage\r\n              })\r\n          }\r\n        )\r\n      }\r\n\r\n      \r\n\r\n    }\r\n\r\n    render(){\r\n      console.log(this.state.uuid)\r\n      const { member, isSubmit } = this.state\r\n  return (\r\n   <div>\r\n     { isSubmit ? \r\n     // something\r\n    //  <h1>test</h1>\r\n     <div>\r\n     <Form\r\n      onSubmit={this.bookingVerfify}\r\n      ref = {c => {\r\n        this.form = c\r\n      }}\r\n\r\n      >\r\n        <div className=\"price__details\">\r\n                <h1>Please send your receipt to admin's LINE application</h1>\r\n                <h1>Total price</h1>\r\n                <h1><pre>Normal price          {this.state.price.normal_price}</pre></h1>\r\n                <h1><pre>Discount        </pre></h1>\r\n                <h1><pre> Promotion Time      -{this.state.price.discount_time}</pre></h1>\r\n                <h1><pre> Group               -{this.state.price.discount_member}</pre></h1>\r\n                <hr></hr>\r\n                <h1><pre>TOTAL                 {this.state.price.pay}</pre></h1>\r\n              </div>\r\n\r\n        <div className=\"form-group\">\r\n         <button className=\"price__submit\" type=\"submit\">\r\n           Verify\r\n         </button>\r\n       </div>\r\n\r\n       <CheckButton\r\n        className=\"\"\r\n        style={{display:\"none\"}}\r\n        ref={c => {\r\n          this.checkBtn = c\r\n        }}\r\n       >\r\n\r\n       </CheckButton>\r\n\r\n      </Form>\r\n\r\n      </div>\r\n     \r\n     :\r\n    <div \r\n    // className=\"list_row\"\r\n    >\r\n      <Form \r\n        onSubmit={this.handleCreate}\r\n        ref = {c => {\r\n          this.form = c\r\n        }}\r\n      \r\n      >\r\n      { !member ? <div>\r\n       <div className=\"form-group\">\r\n         <label className=\"Header__label\">Name</label>\r\n         <Input \r\n          className=\"form-control\"\r\n          id=\"name\" \r\n          value={this.state.name}\r\n          onChange={this.onChangename}\r\n          // validations={[name]}\r\n          />\r\n\r\n       </div>\r\n\r\n       <div className=\"form-group\">\r\n         <label className=\"Header__label\">Email address</label>\r\n         <Input\r\n           type=\"text\"\r\n           className=\"form-control\"\r\n           id=\"email\"\r\n           placeholder=\"name@example.com\"\r\n           value={this.state.email}\r\n           onChange={this.onChangeemail}\r\n          //  validations= {[vemail]}\r\n         />\r\n       </div>\r\n\r\n       <div className=\"form-group\">\r\n          <label className=\"Header__label\">Phone number</label>\r\n          <Input\r\n            className=\"form-control\"\r\n            id=\"phone\"\r\n            placeholder=\"012-345-6789\"\r\n            value={this.state.phone}\r\n            onChange={this.onChangephone}\r\n            // validations={[phone]}\r\n          />\r\n       </div>\r\n       </div>\r\n       : \r\n       <h1>Booking Details</h1>\r\n      }\r\n           <ul\r\n            className =\"ul__booking\"\r\n           >\r\n               {this.state.bookingDetail2 && \r\n                    this.state.bookingDetail2.map(detail => (\r\n                        <li\r\n                          className = \"li__booking\"\r\n                        >\r\n                          {detail.time}  {detail.column}\r\n                        </li>\r\n                    ))\r\n               }\r\n           </ul>\r\n       \r\n        <div className=\"form-group\">\r\n         <button className=\"price__submit\" type=\"submit\">\r\n           Submit\r\n         </button>\r\n       </div>\r\n\r\n       <CheckButton\r\n        className=\"\"\r\n        style={{display:\"none\"}}\r\n        ref={c => {\r\n          this.checkBtn = c\r\n        }}\r\n       >\r\n\r\n       </CheckButton>\r\n      </Form>\r\n    </div>\r\n    }\r\n\r\n    </div>\r\n      \r\n  )\r\n      }\r\n}\r\n\r\nexport default CreateForm\r\n\r\n"]},"metadata":{},"sourceType":"module"}