{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pentester\\\\react\\\\project\\\\project3\\\\src\\\\booking\\\\Groupdetail.js\";\nimport React, { useState, useEffect } from 'react';\nimport GroupList from \"../services/groupservices\";\nimport HistoryServices from '../services/history_servies';\nimport { Container } from './GroupRefundModal/Container';\nimport Grouptable from './Grouptable';\nimport { useTable } from 'react-table';\nimport '../css/Groupdetail.css';\nimport Data from '../api/group__members';\nimport button from 'react-validation/build/button';\nimport { ContactSupportOutlined } from '@material-ui/icons';\nimport Headertable from './Headertable';\nimport GroupBKhistoryNextMonth from './GroupBKhistoryNextMonth';\nimport GroupBKhistoryThisMonth from './GroupBKhistoryThisMonth';\nimport GroupPMhistory from './GroupPMhistory';\n\nfunction Groupdetail(props) {\n  const [CurrentGroup, setCurrentGroup] = useState(undefined); // match with table\n\n  const [presentGroup, setPresentGroup] = useState(undefined);\n  const [members, setMembers] = useState([]);\n  const [authority, setAuthority] = useState(0);\n  const [role, setRole] = useState(undefined);\n  const [dataTerm, setData] = useState([]);\n  const [isPrivacy, setPrivacy] = useState(false);\n  const [joingroup, setJoin] = useState(undefined);\n  const [dataApi, setApi] = useState([]);\n  const [groupOldBK, setGroupOldBK] = useState([]);\n  const [groupNewBK, setGroupNewBK] = useState([]);\n  const [groupPM, setGroupPM] = useState([]);\n  const group = GroupList.getCurrentGroup();\n\n  const getGroup = name => {\n    GroupList.get(name).then(response => {\n      setCurrentGroup(response.data);\n      console.log(response.data);\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  useEffect(() => {\n    setPresentGroup(GroupList.getCurrentGroup());\n    GroupList.getMembers(group).then(response => {\n      console.log(response.data.detail.member);\n      setApi(response.data.detail.member);\n      authorityCheck(response.data.role);\n      setJoin(response.data.group_name);\n      setPrivacy(response.data.public);\n      setGroupOldBK(response.data.detail.groupbooking.this_month);\n      setGroupNewBK(response.data.detail.groupbooking.next_month);\n      setGroupPM(response.data.detail.payment);\n    }); // HistoryServices.GroupBookingHistory(group).then(response => {\n    //   setGroupOldBK(response.data.this_month)\n    //   setGroupNewBK(response.data.next_month)\n    //   setGroupPM(respomse.data.payment)\n    // })\n  }, []);\n\n  const handleMembers = members => {\n    let count = 0;\n    const dataTemp = [];\n\n    for (let i in members) {\n      console.log(\"i information\");\n      console.log(members[i]);\n      dataTemp.push({\n        sequence: count,\n        member: members[i]\n      });\n      count++;\n    }\n\n    return setData(dataTemp);\n  };\n\n  const authorityCheck = role => {\n    if (role == \"header\") {\n      setAuthority(0);\n    } else if (role == \"member\") {\n      setAuthority(1);\n    } else if (role == \"waiting\") {\n      setAuthority(2);\n    } else {\n      setAuthority(3); //this case status is free\n    }\n\n    console.log(\"the authority is \", authority);\n    console.log(\"this is role \", role);\n    console.log(typeof role);\n  }; // ***************************************************************************\n  // Services is here\n\n\n  const handleJoin = () => {\n    GroupList.joinGroup(group).then(window.alert(\"Your request is successful\"), window.location.reload());\n    console.log(group);\n  };\n\n  const handleLeave = () => {\n    GroupList.leaveGroup().then(window.location.reload());\n  };\n\n  const handleCancel = () => {\n    GroupList.cancel(group).then(window.location.reload());\n  };\n\n  const handlePrivacy = status => {\n    // const group = GroupList.getCurrentGroup()\n    if (status) {\n      GroupList.privacy(group, status).then(window.location.reload());\n    } else {\n      GroupList.privacy(group, status).then(window.location.reload());\n    } // setPrivacy(!status)\n\n  }; // services\n  // ***************************************************************************\n\n\n  const triggerText = 'Refund';\n\n  const header = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container // className=\"Booking__submit\"\n    , {\n      triggerText: triggerText,\n      onSubmit: onSubmit,\n      GrouprefundDetail: GroupPM,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 15\n      }\n    }), isPrivacy ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"privacy__on\",\n      onClick: () => {\n        handlePrivacy(false);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, \"OFF\") : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"privacy__off\",\n      onClick: () => handlePrivacy(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }\n    }, \"ON\"));\n  };\n\n  const member = () => {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      className: \"member__leave\",\n      onClick: () => handleLeave(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 12\n      }\n    }, \"Leave\");\n  };\n\n  const free = () => {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      className: \"free__join\",\n      onClick: () => handleJoin(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 12\n      }\n    }, \"Join\");\n  };\n\n  const wating = () => {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      className: \"wating__cancel\",\n      onClick: () => handleCancel(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 12\n      }\n    }, \"Cancel\");\n  };\n\n  const handleRole = authority => {\n    switch (authority) {\n      case 0:\n        // return console.log(\"this is header\")\n        return header();\n\n      case 1:\n        return member();\n\n      case 2:\n        return wating();\n\n      case 3:\n        return free();\n\n      default:\n        break;\n    }\n  };\n\n  const columns = React.useMemo(() => [// {\n  //   Header: \"Numbers\",\n  //   accessor: \"id\"\n  // },\n  {\n    Header: \"Members\",\n    accessor: \"firstname\"\n  }, {\n    Header: \"Delete\",\n    accessor: \"delete\"\n  }], []);\n  const data = dataApi;\n  console.log(data);\n  console.log(\"this is data\");\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow\n  } = useTable({\n    columns,\n    data\n  });\n  console.log(\"this is privacy value \", isPrivacy);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"group__detail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }\n  }, \"Group: \", presentGroup), authority == 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Header__group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Headertable, {\n    dataHeader: dataApi,\n    authority2: authority,\n    className: \"Header__table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 11\n    }\n  }), (groupOldBK === null || groupOldBK === void 0 ? void 0 : groupOldBK.length) ? /*#__PURE__*/React.createElement(GroupBKhistoryThisMonth, {\n    this_month: groupOldBK,\n    className: \"Header__table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 13\n    }\n  }), (groupNewBK === null || groupNewBK === void 0 ? void 0 : groupNewBK.length) ? /*#__PURE__*/React.createElement(GroupBKhistoryNextMonth, {\n    next_month: groupNewBK,\n    className: \"Header__table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 13\n    }\n  }), (groupPM === null || groupPM === void 0 ? void 0 : groupPM.length) ? /*#__PURE__*/React.createElement(GroupPMhistory, {\n    payment: groupPM,\n    className: \"Header__table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 15\n    }\n  })) : isPrivacy || authority == 1 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Member__group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grouptable, {\n    members: dataApi,\n    className: \"Member__table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 13\n    }\n  }), (groupOldBK === null || groupOldBK === void 0 ? void 0 : groupOldBK.length) ? /*#__PURE__*/React.createElement(GroupBKhistoryThisMonth, {\n    this_month: groupOldBK,\n    className: \"Member__table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 15\n    }\n  }), (groupNewBK === null || groupNewBK === void 0 ? void 0 : groupNewBK.length) ? /*#__PURE__*/React.createElement(GroupBKhistoryNextMonth, {\n    next_month: groupNewBK,\n    className: \"Member__table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 15\n    }\n  }), (groupPM === null || groupPM === void 0 ? void 0 : groupPM.length) ? /*#__PURE__*/React.createElement(GroupPMhistory, {\n    payment: groupPM,\n    className: \"Member__table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 11\n    }\n  }, \"Please contact your admin this group is privacy\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"role_checks\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }\n  }, handleRole(authority), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 9\n    }\n  }, authority)));\n}\n\nexport default Groupdetail;","map":{"version":3,"sources":["C:/Users/pentester/react/project/project3/src/booking/Groupdetail.js"],"names":["React","useState","useEffect","GroupList","HistoryServices","Container","Grouptable","useTable","Data","button","ContactSupportOutlined","Headertable","GroupBKhistoryNextMonth","GroupBKhistoryThisMonth","GroupPMhistory","Groupdetail","props","CurrentGroup","setCurrentGroup","undefined","presentGroup","setPresentGroup","members","setMembers","authority","setAuthority","role","setRole","dataTerm","setData","isPrivacy","setPrivacy","joingroup","setJoin","dataApi","setApi","groupOldBK","setGroupOldBK","groupNewBK","setGroupNewBK","groupPM","setGroupPM","group","getCurrentGroup","getGroup","name","get","then","response","data","console","log","catch","e","getMembers","detail","member","authorityCheck","group_name","public","groupbooking","this_month","next_month","payment","handleMembers","count","dataTemp","i","push","sequence","handleJoin","joinGroup","window","alert","location","reload","handleLeave","leaveGroup","handleCancel","cancel","handlePrivacy","status","privacy","triggerText","header","onSubmit","GroupPM","free","wating","handleRole","columns","useMemo","Header","accessor","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\n\r\nimport GroupList from \"../services/groupservices\"\r\nimport HistoryServices from '../services/history_servies'\r\n\r\nimport {Container} from './GroupRefundModal/Container'\r\n\r\nimport Grouptable from './Grouptable'\r\nimport { useTable } from 'react-table'\r\n\r\nimport '../css/Groupdetail.css'\r\n\r\nimport Data from '../api/group__members'\r\n\r\nimport button from 'react-validation/build/button'\r\nimport { ContactSupportOutlined } from '@material-ui/icons'\r\nimport Headertable from './Headertable'\r\nimport GroupBKhistoryNextMonth from './GroupBKhistoryNextMonth'\r\nimport GroupBKhistoryThisMonth from './GroupBKhistoryThisMonth'\r\nimport GroupPMhistory from './GroupPMhistory'\r\n\r\nfunction Groupdetail(props) {\r\n\r\n  const [CurrentGroup, setCurrentGroup] = useState(undefined)  // match with table\r\n  const [presentGroup, setPresentGroup] = useState(undefined)\r\n  const [members, setMembers] = useState([])\r\n  const [authority, setAuthority] = useState(0)\r\n  const [role, setRole] = useState(undefined)\r\n  const [dataTerm, setData] = useState([])\r\n  const [isPrivacy, setPrivacy] = useState(false)\r\n  const [joingroup, setJoin] = useState(undefined)\r\n  const [dataApi, setApi] = useState([])\r\n  const [groupOldBK, setGroupOldBK] = useState([])\r\n  const [groupNewBK, setGroupNewBK] = useState([])\r\n  const [groupPM, setGroupPM] = useState([])\r\n\r\n  const group = GroupList.getCurrentGroup()\r\n\r\n  const getGroup = name => {\r\n    GroupList.get(name)\r\n      .then(response => {\r\n        setCurrentGroup(response.data)\r\n        console.log(response.data)\r\n      })\r\n      .catch(e => {\r\n        console.log(e)\r\n      })\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n\r\n\r\n    setPresentGroup(\r\n      GroupList.getCurrentGroup()\r\n    )\r\n\r\n    GroupList.getMembers(group)\r\n      .then(response => {\r\n        console.log(response.data.detail.member)\r\n        setApi(response.data.detail.member)\r\n        authorityCheck(response.data.role)\r\n        setJoin(response.data.group_name)\r\n        setPrivacy(response.data.public)\r\n\r\n        setGroupOldBK(response.data.detail.groupbooking.this_month)\r\n        setGroupNewBK(response.data.detail.groupbooking.next_month)\r\n        setGroupPM(response.data.detail.payment)\r\n      })\r\n\r\n    // HistoryServices.GroupBookingHistory(group).then(response => {\r\n    //   setGroupOldBK(response.data.this_month)\r\n    //   setGroupNewBK(response.data.next_month)\r\n    //   setGroupPM(respomse.data.payment)\r\n    // })\r\n\r\n  }, [])\r\n\r\n  const handleMembers = (members) => {\r\n    let count = 0\r\n    const dataTemp = []\r\n    for (let i in members) {\r\n      console.log(\"i information\")\r\n      console.log(members[i])\r\n      dataTemp.push({\r\n        sequence: count,\r\n        member: members[i]\r\n      })\r\n      count++\r\n    }\r\n    return setData(\r\n      dataTemp\r\n    )\r\n  }\r\n\r\n  const authorityCheck = (role) => {\r\n    if (role == \"header\") {\r\n      setAuthority(0)\r\n    } else if (role == \"member\") {\r\n      setAuthority(1)\r\n    } else if (role == \"waiting\") {\r\n      setAuthority(2)\r\n    } else {\r\n      setAuthority(3) //this case status is free\r\n    }\r\n    console.log(\"the authority is \", authority)\r\n    console.log(\"this is role \", role)\r\n    console.log(typeof (role))\r\n  }\r\n\r\n  // ***************************************************************************\r\n  // Services is here\r\n\r\n  const handleJoin = () => {\r\n\r\n    GroupList.joinGroup(group)\r\n      .then(\r\n        window.alert(\"Your request is successful\"),\r\n        window.location.reload()\r\n      )\r\n    console.log(group)\r\n  }\r\n\r\n  const handleLeave = () => {\r\n    GroupList.leaveGroup()\r\n      .then(\r\n        window.location.reload()\r\n      )\r\n  }\r\n\r\n\r\n  const handleCancel = () => {\r\n    GroupList.cancel(group)\r\n      .then(\r\n        window.location.reload()\r\n      )\r\n  }\r\n\r\n  const handlePrivacy = (status) => {\r\n    // const group = GroupList.getCurrentGroup()\r\n    if (status) {\r\n      GroupList.privacy(group, status)\r\n        .then(\r\n          window.location.reload()\r\n        )\r\n    } else {\r\n      GroupList.privacy(group, status)\r\n        .then(\r\n          window.location.reload()\r\n        )\r\n    }\r\n    // setPrivacy(!status)\r\n  }\r\n\r\n  // services\r\n  // ***************************************************************************\r\n\r\n  const triggerText = 'Refund'\r\n\r\n  const header = () => {\r\n    return (\r\n      <div>\r\n              <Container \r\n                // className=\"Booking__submit\"\r\n                triggerText={triggerText}\r\n                onSubmit={onSubmit} \r\n                GrouprefundDetail={GroupPM}\r\n                />\r\n      {isPrivacy ?\r\n        <button\r\n          className=\"privacy__on\"\r\n          onClick={() => { handlePrivacy(false) }}\r\n        >\r\n          OFF\r\n          </button>\r\n        :\r\n        <button\r\n          className=\"privacy__off\"\r\n          onClick={() => handlePrivacy(true)}\r\n        >\r\n          ON\r\n          </button>\r\n  }\r\n          </div>\r\n    )\r\n\r\n  }\r\n\r\n  const member = () => {\r\n    return <button\r\n      className=\"member__leave\"\r\n      onClick={() => handleLeave()}\r\n    >\r\n      Leave\r\n              </button>\r\n  }\r\n\r\n  const free = () => {\r\n    return <button\r\n      className=\"free__join\"\r\n      onClick={() => handleJoin()}\r\n    >\r\n      Join\r\n              </button>\r\n\r\n  }\r\n\r\n  const wating = () => {\r\n    return <button\r\n      className=\"wating__cancel\"\r\n      onClick={() => handleCancel()}\r\n\r\n    >\r\n      Cancel\r\n               </button>\r\n  }\r\n\r\n  const handleRole = (authority) => {\r\n    switch (authority) {\r\n      case 0:\r\n        // return console.log(\"this is header\")\r\n        return header();\r\n      case 1:\r\n        return member();\r\n      case 2:\r\n        return wating();\r\n      case 3:\r\n        return free();\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  const columns = React.useMemo(\r\n    () =>\r\n      [\r\n        // {\r\n        //   Header: \"Numbers\",\r\n        //   accessor: \"id\"\r\n        // },\r\n        {\r\n          Header: \"Members\",\r\n          accessor: \"firstname\"\r\n        },\r\n        {\r\n          Header: \"Delete\",\r\n          accessor: \"delete\"\r\n        }\r\n      ]\r\n    ,\r\n    []\r\n  )\r\n\r\n\r\n\r\n  const data = dataApi\r\n\r\n  console.log(data)\r\n  console.log(\"this is data\")\r\n\r\n\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n  } = useTable({ columns, data })\r\n  console.log(\"this is privacy value \", isPrivacy)\r\n  return (\r\n    <div className=\"group__detail\">\r\n\r\n      <h1>Group: {presentGroup}</h1>\r\n\r\n      {authority == 0\r\n        ?\r\n        <div className=\"Header__group\">\r\n          <Headertable\r\n            dataHeader={dataApi}\r\n            authority2={authority}\r\n            className=\"Header__table\"\r\n          />\r\n          {groupOldBK?.length ?\r\n            <GroupBKhistoryThisMonth\r\n              this_month={groupOldBK}\r\n              className=\"Header__table\"\r\n            />\r\n            :\r\n            <div />\r\n          }\r\n          {groupNewBK?.length ?\r\n            <GroupBKhistoryNextMonth\r\n              next_month={groupNewBK}\r\n              className=\"Header__table\"\r\n            />\r\n            :\r\n            <div />\r\n          }\r\n          {groupPM?.length ?\r\n            <GroupPMhistory\r\n              payment={groupPM}\r\n              className=\"Header__table\"\r\n            />\r\n            : <div />}\r\n\r\n        </div>\r\n        :\r\n        isPrivacy || authority == 1\r\n          ?\r\n          <div className=\"Member__group\">\r\n            <Grouptable\r\n              members={dataApi}\r\n              className=\"Member__table\"\r\n            />\r\n            {groupOldBK?.length ?\r\n              <GroupBKhistoryThisMonth\r\n                this_month={groupOldBK}\r\n                className=\"Member__table\"\r\n              />\r\n              :\r\n              <div />\r\n            }\r\n            {groupNewBK?.length ?\r\n              <GroupBKhistoryNextMonth\r\n                next_month={groupNewBK}\r\n                className=\"Member__table\"\r\n              />\r\n              :\r\n              <div />}\r\n            {groupPM?.length ?\r\n              <GroupPMhistory\r\n                payment={groupPM}\r\n                className=\"Member__table\"\r\n              />\r\n              :\r\n              <div />\r\n            }\r\n\r\n          </div>\r\n          :\r\n\r\n          <h1>Please contact your admin this group is privacy</h1>\r\n\r\n      }\r\n      <div className=\"role_checks\">\r\n        {handleRole(authority)}\r\n        <h1>{authority}</h1>\r\n\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Groupdetail\r\n"]},"metadata":{},"sourceType":"module"}