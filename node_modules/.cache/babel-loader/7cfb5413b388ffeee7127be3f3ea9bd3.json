{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\pentester\\\\react\\\\project\\\\project3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import GroupList from\"../services/groupservices\";import HistoryServices from'../services/history_servies';import{Container}from'./GroupRefundModal/Container';import Grouptable from'./Grouptable';import{useTable}from'react-table';import'../css/Groupdetail.css';import Data from'../api/group__members';import button from'react-validation/build/button';import{ContactSupportOutlined}from'@material-ui/icons';import Headertable from'./Headertable';import GroupBKhistoryNextMonth from'./GroupBKhistoryNextMonth';import GroupBKhistoryThisMonth from'./GroupBKhistoryThisMonth';import GroupPMhistory from'./GroupPMhistory';function Groupdetail(props){var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),CurrentGroup=_useState2[0],setCurrentGroup=_useState2[1];// match with table\nvar _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),presentGroup=_useState4[0],setPresentGroup=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),members=_useState6[0],setMembers=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),authority=_useState8[0],setAuthority=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),role=_useState10[0],setRole=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),dataTerm=_useState12[0],setData=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isPrivacy=_useState14[0],setPrivacy=_useState14[1];var _useState15=useState(undefined),_useState16=_slicedToArray(_useState15,2),joingroup=_useState16[0],setJoin=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),dataApi=_useState18[0],setApi=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),groupOldBK=_useState20[0],setGroupOldBK=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),groupNewBK=_useState22[0],setGroupNewBK=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),groupPM=_useState24[0],setGroupPM=_useState24[1];var group=GroupList.getCurrentGroup();var getGroup=function getGroup(name){GroupList.get(name).then(function(response){setCurrentGroup(response.data);console.log(response.data);}).catch(function(e){console.log(e);});};useEffect(function(){setPresentGroup(GroupList.getCurrentGroup());GroupList.getMembers(group).then(function(response){console.log(response.data.detail.member);setApi(response.data.detail.member);authorityCheck(response.data.role);setJoin(response.data.group_name);setPrivacy(response.data.public);setGroupOldBK(response.data.detail.groupbooking.this_month);setGroupNewBK(response.data.detail.groupbooking.next_month);setGroupPM(response.data.detail.payment);});// HistoryServices.GroupBookingHistory(group).then(response => {\n//   setGroupOldBK(response.data.this_month)\n//   setGroupNewBK(response.data.next_month)\n//   setGroupPM(respomse.data.payment)\n// })\n},[]);var handleMembers=function handleMembers(members){var count=0;var dataTemp=[];for(var i in members){console.log(\"i information\");console.log(members[i]);dataTemp.push({sequence:count,member:members[i]});count++;}return setData(dataTemp);};var authorityCheck=function authorityCheck(role){if(role==\"header\"){setAuthority(0);}else if(role==\"member\"){setAuthority(1);}else if(role==\"waiting\"){setAuthority(2);}else{setAuthority(3);//this case status is free\n}console.log(\"the authority is \",authority);console.log(\"this is role \",role);console.log(typeof role);};// ***************************************************************************\n// Services is here\nvar handleJoin=function handleJoin(){GroupList.joinGroup(group).then(window.alert(\"Your request is successful\"),window.location.reload());console.log(group);};var handleLeave=function handleLeave(){GroupList.leaveGroup(group).then(window.location.reload());};var handleCancel=function handleCancel(){GroupList.cancel(group).then(window.location.reload());};var handlePrivacy=function handlePrivacy(status){// const group = GroupList.getCurrentGroup()\nif(status){GroupList.privacy(group,status).then(window.location.reload());}else{GroupList.privacy(group,status).then(window.location.reload());}// setPrivacy(!status)\n};// services\n// ***************************************************************************\nvar triggerText='Refund';var onSubmit=function onSubmit(event){event.preventDefault(event);};var header=function header(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Container// className=\"Booking__submit\"\n,{triggerText:triggerText,onSubmit:onSubmit,GrouprefundDetail:groupNewBK,group:group}),isPrivacy?/*#__PURE__*/React.createElement(\"button\",{className:\"privacy__on\",onClick:function onClick(){handlePrivacy(false);}},\"OFF\"):/*#__PURE__*/React.createElement(\"button\",{className:\"privacy__off\",onClick:function onClick(){return handlePrivacy(true);}},\"ON\"));};var member=function member(){return/*#__PURE__*/React.createElement(\"button\",{className:\"member__leave\",onClick:function onClick(){return handleLeave();}},\"Leave\");};var free=function free(){return/*#__PURE__*/React.createElement(\"button\",{className:\"free__join\",onClick:function onClick(){return handleJoin();}},\"Join\");};var wating=function wating(){return/*#__PURE__*/React.createElement(\"button\",{className:\"wating__cancel\",onClick:function onClick(){return handleCancel();}},\"Cancel\");};var handleRole=function handleRole(authority){switch(authority){case 0:// return console.log(\"this is header\")\nreturn header();case 1:return member();case 2:return wating();case 3:return free();default:break;}};var columns=React.useMemo(function(){return[// {\n//   Header: \"Numbers\",\n//   accessor: \"id\"\n// },\n{Header:\"Members\",accessor:\"firstname\"},{Header:\"Delete\",accessor:\"delete\"}];},[]);var data=dataApi;console.log(data);console.log(\"this is data\");var _useTable=useTable({columns:columns,data:data}),getTableProps=_useTable.getTableProps,getTableBodyProps=_useTable.getTableBodyProps,headerGroups=_useTable.headerGroups,rows=_useTable.rows,prepareRow=_useTable.prepareRow;console.log(\"this is privacy value \",isPrivacy);return/*#__PURE__*/React.createElement(\"div\",{className:\"group__detail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"groupdetail__bg\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"groupdetailRoot__bg\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"groupdetail__details\"},\"Group: \",presentGroup),authority==0?/*#__PURE__*/React.createElement(\"div\",{className:\"Header__group\"},/*#__PURE__*/React.createElement(Headertable,{dataHeader:dataApi,authority2:authority,className:\"Header__table\"}),(groupOldBK===null||groupOldBK===void 0?void 0:groupOldBK.length)?/*#__PURE__*/React.createElement(GroupBKhistoryThisMonth,{this_month:groupOldBK,className:\"Header__table\"}):/*#__PURE__*/React.createElement(\"div\",null),(groupNewBK===null||groupNewBK===void 0?void 0:groupNewBK.length)?/*#__PURE__*/React.createElement(GroupBKhistoryNextMonth,{next_month:groupNewBK,className:\"Header__table\"}):/*#__PURE__*/React.createElement(\"div\",null),(groupPM===null||groupPM===void 0?void 0:groupPM.length)?/*#__PURE__*/React.createElement(GroupPMhistory,{payment:groupPM,className:\"Header__table\"}):/*#__PURE__*/React.createElement(\"div\",null)):isPrivacy||authority==1?/*#__PURE__*/React.createElement(\"div\",{className:\"Member__group\"},/*#__PURE__*/React.createElement(Grouptable,{members:dataApi,className:\"Member__table\"}),(groupOldBK===null||groupOldBK===void 0?void 0:groupOldBK.length)?/*#__PURE__*/React.createElement(GroupBKhistoryThisMonth,{this_month:groupOldBK,className:\"Member__table\"}):/*#__PURE__*/React.createElement(\"div\",null),(groupNewBK===null||groupNewBK===void 0?void 0:groupNewBK.length)?/*#__PURE__*/React.createElement(GroupBKhistoryNextMonth,{next_month:groupNewBK,className:\"Member__table\"}):/*#__PURE__*/React.createElement(\"div\",null),(groupPM===null||groupPM===void 0?void 0:groupPM.length)?/*#__PURE__*/React.createElement(GroupPMhistory,{payment:groupPM,className:\"Member__table\"}):/*#__PURE__*/React.createElement(\"div\",null)):/*#__PURE__*/React.createElement(\"h1\",{className:\"groupdetail__details\"},\"Please contact your admin this group is privacy\"),/*#__PURE__*/React.createElement(\"div\",{className:\"role_checks\"},handleRole(authority))));}export default Groupdetail;","map":{"version":3,"sources":["C:/Users/pentester/react/project/project3/src/booking/Groupdetail.js"],"names":["React","useState","useEffect","GroupList","HistoryServices","Container","Grouptable","useTable","Data","button","ContactSupportOutlined","Headertable","GroupBKhistoryNextMonth","GroupBKhistoryThisMonth","GroupPMhistory","Groupdetail","props","undefined","CurrentGroup","setCurrentGroup","presentGroup","setPresentGroup","members","setMembers","authority","setAuthority","role","setRole","dataTerm","setData","isPrivacy","setPrivacy","joingroup","setJoin","dataApi","setApi","groupOldBK","setGroupOldBK","groupNewBK","setGroupNewBK","groupPM","setGroupPM","group","getCurrentGroup","getGroup","name","get","then","response","data","console","log","catch","e","getMembers","detail","member","authorityCheck","group_name","public","groupbooking","this_month","next_month","payment","handleMembers","count","dataTemp","i","push","sequence","handleJoin","joinGroup","window","alert","location","reload","handleLeave","leaveGroup","handleCancel","cancel","handlePrivacy","status","privacy","triggerText","onSubmit","event","preventDefault","header","free","wating","handleRole","columns","useMemo","Header","accessor","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\n\r\nimport GroupList from \"../services/groupservices\"\r\nimport HistoryServices from '../services/history_servies'\r\n\r\nimport {Container} from './GroupRefundModal/Container'\r\n\r\nimport Grouptable from './Grouptable'\r\nimport { useTable } from 'react-table'\r\n\r\nimport '../css/Groupdetail.css'\r\n\r\nimport Data from '../api/group__members'\r\n\r\nimport button from 'react-validation/build/button'\r\nimport { ContactSupportOutlined } from '@material-ui/icons'\r\nimport Headertable from './Headertable'\r\nimport GroupBKhistoryNextMonth from './GroupBKhistoryNextMonth'\r\nimport GroupBKhistoryThisMonth from './GroupBKhistoryThisMonth'\r\nimport GroupPMhistory from './GroupPMhistory'\r\n\r\nfunction Groupdetail(props) {\r\n\r\n  const [CurrentGroup, setCurrentGroup] = useState(undefined)  // match with table\r\n  const [presentGroup, setPresentGroup] = useState(undefined)\r\n  const [members, setMembers] = useState([])\r\n  const [authority, setAuthority] = useState(0)\r\n  const [role, setRole] = useState(undefined)\r\n  const [dataTerm, setData] = useState([])\r\n  const [isPrivacy, setPrivacy] = useState(false)\r\n  const [joingroup, setJoin] = useState(undefined)\r\n  const [dataApi, setApi] = useState([])\r\n  const [groupOldBK, setGroupOldBK] = useState([])\r\n  const [groupNewBK, setGroupNewBK] = useState([])\r\n  const [groupPM, setGroupPM] = useState([])\r\n\r\n  const group = GroupList.getCurrentGroup()\r\n\r\n  const getGroup = name => {\r\n    GroupList.get(name)\r\n      .then(response => {\r\n        setCurrentGroup(response.data)\r\n        console.log(response.data)\r\n      })\r\n      .catch(e => {\r\n        console.log(e)\r\n      })\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n\r\n\r\n    setPresentGroup(\r\n      GroupList.getCurrentGroup()\r\n    )\r\n\r\n    GroupList.getMembers(group)\r\n      .then(response => {\r\n        console.log(response.data.detail.member)\r\n        setApi(response.data.detail.member)\r\n        authorityCheck(response.data.role)\r\n        setJoin(response.data.group_name)\r\n        setPrivacy(response.data.public)\r\n\r\n        setGroupOldBK(response.data.detail.groupbooking.this_month)\r\n        setGroupNewBK(response.data.detail.groupbooking.next_month)\r\n        setGroupPM(response.data.detail.payment)\r\n      })\r\n\r\n    // HistoryServices.GroupBookingHistory(group).then(response => {\r\n    //   setGroupOldBK(response.data.this_month)\r\n    //   setGroupNewBK(response.data.next_month)\r\n    //   setGroupPM(respomse.data.payment)\r\n    // })\r\n\r\n  }, [])\r\n\r\n  const handleMembers = (members) => {\r\n    let count = 0\r\n    const dataTemp = []\r\n    for (let i in members) {\r\n      console.log(\"i information\")\r\n      console.log(members[i])\r\n      dataTemp.push({\r\n        sequence: count,\r\n        member: members[i]\r\n      })\r\n      count++\r\n    }\r\n    return setData(\r\n      dataTemp\r\n    )\r\n  }\r\n\r\n  const authorityCheck = (role) => {\r\n    if (role == \"header\") {\r\n      setAuthority(0)\r\n    } else if (role == \"member\") {\r\n      setAuthority(1)\r\n    } else if (role == \"waiting\") {\r\n      setAuthority(2)\r\n    } else {\r\n      setAuthority(3) //this case status is free\r\n    }\r\n    console.log(\"the authority is \", authority)\r\n    console.log(\"this is role \", role)\r\n    console.log(typeof (role))\r\n  }\r\n\r\n  // ***************************************************************************\r\n  // Services is here\r\n\r\n  const handleJoin = () => {\r\n\r\n    GroupList.joinGroup(group)\r\n      .then(\r\n        window.alert(\"Your request is successful\"),\r\n        window.location.reload()\r\n      )\r\n    console.log(group)\r\n  }\r\n\r\n  const handleLeave = () => {\r\n    GroupList.leaveGroup(group)\r\n      .then(\r\n        window.location.reload()\r\n      )\r\n  }\r\n\r\n\r\n  const handleCancel = () => {\r\n    GroupList.cancel(group)\r\n      .then(\r\n        window.location.reload()\r\n      )\r\n  }\r\n\r\n  const handlePrivacy = (status) => {\r\n    // const group = GroupList.getCurrentGroup()\r\n    if (status) {\r\n      GroupList.privacy(group, status)\r\n        .then(\r\n          window.location.reload()\r\n        )\r\n    } else {\r\n      GroupList.privacy(group, status)\r\n        .then(\r\n          window.location.reload()\r\n        )\r\n    }\r\n    // setPrivacy(!status)\r\n  }\r\n\r\n  // services\r\n  // ***************************************************************************\r\n\r\n  const triggerText = 'Refund'\r\n  const onSubmit = (event) => {\r\n    event.preventDefault(event)\r\n}\r\n\r\n  const header = () => {\r\n    return (\r\n      <div>\r\n              <Container \r\n                // className=\"Booking__submit\"\r\n                triggerText={triggerText}\r\n                onSubmit={onSubmit} \r\n                GrouprefundDetail={groupNewBK}\r\n                group={group}\r\n                />\r\n      {isPrivacy ?\r\n        <button\r\n          className=\"privacy__on\"\r\n          onClick={() => { handlePrivacy(false) }}\r\n        >\r\n          OFF\r\n          </button>\r\n        :\r\n        <button\r\n          className=\"privacy__off\"\r\n          onClick={() => handlePrivacy(true)}\r\n        >\r\n          ON\r\n          </button>\r\n  }\r\n          </div>\r\n    )\r\n\r\n  }\r\n\r\n  const member = () => {\r\n    return <button\r\n      className=\"member__leave\"\r\n      onClick={() => handleLeave()}\r\n    >\r\n      Leave\r\n              </button>\r\n  }\r\n\r\n  const free = () => {\r\n    return <button\r\n      className=\"free__join\"\r\n      onClick={() => handleJoin()}\r\n    >\r\n      Join\r\n              </button>\r\n\r\n  }\r\n\r\n  const wating = () => {\r\n    return <button\r\n      className=\"wating__cancel\"\r\n      onClick={() => handleCancel()}\r\n\r\n    >\r\n      Cancel\r\n               </button>\r\n  }\r\n\r\n  const handleRole = (authority) => {\r\n    switch (authority) {\r\n      case 0:\r\n        // return console.log(\"this is header\")\r\n        return header();\r\n      case 1:\r\n        return member();\r\n      case 2:\r\n        return wating();\r\n      case 3:\r\n        return free();\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  const columns = React.useMemo(\r\n    () =>\r\n      [\r\n        // {\r\n        //   Header: \"Numbers\",\r\n        //   accessor: \"id\"\r\n        // },\r\n        {\r\n          Header: \"Members\",\r\n          accessor: \"firstname\"\r\n        },\r\n        {\r\n          Header: \"Delete\",\r\n          accessor: \"delete\"\r\n        }\r\n      ]\r\n    ,\r\n    []\r\n  )\r\n\r\n\r\n\r\n  const data = dataApi\r\n\r\n  console.log(data)\r\n  console.log(\"this is data\")\r\n\r\n\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    rows,\r\n    prepareRow,\r\n  } = useTable({ columns, data })\r\n  console.log(\"this is privacy value \", isPrivacy)\r\n  return (\r\n    <div className=\"group__detail\">\r\n      <div className=\"groupdetail__bg\"></div>\r\n    <div className=\"groupdetailRoot__bg\">\r\n      <h1 className=\"groupdetail__details\">Group: {presentGroup}</h1>\r\n\r\n      {authority == 0\r\n        ?\r\n        <div className=\"Header__group\">\r\n          <Headertable\r\n            dataHeader={dataApi}\r\n            authority2={authority}\r\n            className=\"Header__table\"\r\n          />\r\n          {groupOldBK?.length ?\r\n            <GroupBKhistoryThisMonth\r\n              this_month={groupOldBK}\r\n              className=\"Header__table\"\r\n            />\r\n            :\r\n            <div />\r\n          }\r\n          {groupNewBK?.length ?\r\n            <GroupBKhistoryNextMonth\r\n              next_month={groupNewBK}\r\n              className=\"Header__table\"\r\n            />\r\n            :\r\n            <div />\r\n          }\r\n          {groupPM?.length ?\r\n            <GroupPMhistory\r\n              payment={groupPM}\r\n              className=\"Header__table\"\r\n            />\r\n            : <div />}\r\n\r\n        </div>\r\n        :\r\n        isPrivacy || authority == 1\r\n          ?\r\n          <div className=\"Member__group\">\r\n            <Grouptable\r\n              members={dataApi}\r\n              className=\"Member__table\"\r\n            />\r\n            {groupOldBK?.length ?\r\n              <GroupBKhistoryThisMonth\r\n                this_month={groupOldBK}\r\n                className=\"Member__table\"\r\n              />\r\n              :\r\n              <div />\r\n            }\r\n            {groupNewBK?.length ?\r\n              <GroupBKhistoryNextMonth\r\n                next_month={groupNewBK}\r\n                className=\"Member__table\"\r\n              />\r\n              :\r\n              <div />}\r\n            {groupPM?.length ?\r\n              <GroupPMhistory\r\n                payment={groupPM}\r\n                className=\"Member__table\"\r\n              />\r\n              :\r\n              <div />\r\n            }\r\n\r\n          </div>\r\n          :\r\n\r\n          <h1 className=\"groupdetail__details\">Please contact your admin this group is privacy</h1>\r\n\r\n      }\r\n      <div className=\"role_checks\">\r\n        {handleRole(authority)}\r\n        {/* <h1>{authority}</h1> */}\r\n\r\n\r\n      </div>\r\n    </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Groupdetail\r\n"]},"metadata":{},"sourceType":"module"}