{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\pentester\\\\react\\\\project\\\\project3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\pentester\\\\react\\\\project\\\\project3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\pentester\\\\react\\\\project\\\\project3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\pentester\\\\react\\\\project\\\\project3\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import dateFns from\"date-fns\";import BookingService from'../../../services/booking_service';var Calendar=/*#__PURE__*/function(_React$Component){_inherits(Calendar,_React$Component);var _super=_createSuper(Calendar);function Calendar(){var _this;_classCallCheck(this,Calendar);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={currentMonth:new Date(),selectedDate:new Date()};_this.onDateClick=function(day){_this.setState({selectedDate:day});};_this.nextMonth=function(){_this.setState({currentMonth:dateFns.addMonths(_this.state.currentMonth,1)});};_this.prevMonth=function(){_this.setState({currentMonth:dateFns.subMonths(_this.state.currentMonth,1)});};_this.handleClick=function(e){BookingService.DateBooking(_this.state.selectedDate.getDate(),_this.state.selectedDate.getMonth(),_this.state.selectedDate.getFullYear()).then(function(response){console.log(response);localStorage.setItem(\"date\",response.date);window.location.replace(\"https://kittichat.github.io/userbooking\");},function(error){var resMessage=error.response&&error.response.data&&error.response.data.message||error.message||error.toString();_this.setState({successful:false,message:resMessage});window.alert(\"Date selection is failed\");window.location.reload();});};return _this;}_createClass(Calendar,[{key:\"renderHeader\",value:function renderHeader(){var dateFormat=\"MMMM YYYY\";return/*#__PURE__*/React.createElement(\"div\",{className:\"header row flex-middle\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col col-start\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icon\",onClick:this.prevMonth},\"chevron_left\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col col-center\"},/*#__PURE__*/React.createElement(\"span\",null,dateFns.format(this.state.currentMonth,dateFormat))),/*#__PURE__*/React.createElement(\"div\",{className:\"col col-end\",onClick:this.nextMonth},/*#__PURE__*/React.createElement(\"div\",{className:\"icon\"},\"chevron_right\")));}},{key:\"renderDays\",value:function renderDays(){var dateFormat=\"dddd\";var days=[];var startDate=dateFns.startOfWeek(this.state.currentMonth);for(var i=0;i<7;i++){days.push(/*#__PURE__*/React.createElement(\"div\",{className:\"col col-center\",key:i},dateFns.format(dateFns.addDays(startDate,i),dateFormat)));}return/*#__PURE__*/React.createElement(\"div\",{className:\"days row\"},days);}},{key:\"renderCells\",value:function renderCells(){var _this2=this;var _this$state=this.state,currentMonth=_this$state.currentMonth,selectedDate=_this$state.selectedDate;var monthStart=dateFns.startOfMonth(currentMonth);var monthEnd=dateFns.endOfMonth(monthStart);var startDate=dateFns.startOfWeek(monthStart);var endDate=dateFns.endOfWeek(monthEnd);var dateFormat=\"D\";var rows=[];var days=[];var day=startDate;var formattedDate=\"\";while(day<=endDate){var _loop=function _loop(i){formattedDate=dateFns.format(day,dateFormat);var cloneDay=day;days.push(/*#__PURE__*/React.createElement(\"div\",{className:\"col cell \".concat(!dateFns.isSameMonth(day,monthStart)?\"disabled\":dateFns.isSameDay(day,selectedDate)?\"selected\":\"\"),key:day,onClick:function onClick(){return _this2.onDateClick(dateFns.parse(cloneDay));}},/*#__PURE__*/React.createElement(\"span\",{className:\"number\"},formattedDate),/*#__PURE__*/React.createElement(\"span\",{className:\"bg\"},formattedDate)));day=dateFns.addDays(day,1);};for(var i=0;i<7;i++){_loop(i);}rows.push(/*#__PURE__*/React.createElement(\"div\",{className:\"row\",key:day},days));days=[];}return/*#__PURE__*/React.createElement(\"div\",{className:\"body\"},rows);}},{key:\"render\",value:function render(){var _this3=this;var selectedDate=this.state.selectedDate;console.log(selectedDate.getDate());return/*#__PURE__*/React.createElement(\"div\",{className:\"calendar__background\"},/*#__PURE__*/React.createElement(\"div\",{className:\"calendar\"},this.renderHeader(),this.renderDays(),this.renderCells()),/*#__PURE__*/React.createElement(\"button\",{className:\"Date__submit\",onClick:function onClick(){_this3.handleClick();}},\"Submit\"));}}]);return Calendar;}(React.Component);export default Calendar;","map":{"version":3,"sources":["C:/Users/pentester/react/project/project3/src/booking/calendar/components/Calendar.jsx"],"names":["React","dateFns","BookingService","Calendar","state","currentMonth","Date","selectedDate","onDateClick","day","setState","nextMonth","addMonths","prevMonth","subMonths","handleClick","e","DateBooking","getDate","getMonth","getFullYear","then","response","console","log","localStorage","setItem","date","window","location","replace","error","resMessage","data","message","toString","successful","alert","reload","dateFormat","format","days","startDate","startOfWeek","i","push","addDays","monthStart","startOfMonth","monthEnd","endOfMonth","endDate","endOfWeek","rows","formattedDate","cloneDay","isSameMonth","isSameDay","parse","renderHeader","renderDays","renderCells","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport dateFns from \"date-fns\";\r\n\r\nimport BookingService from '../../../services/booking_service'\r\n\r\nclass Calendar extends React.Component {\r\n  state = {\r\n    currentMonth: new Date(),\r\n    selectedDate: new Date()\r\n  };\r\n\r\n\r\n  renderHeader() {\r\n    const dateFormat = \"MMMM YYYY\";\r\n\r\n    return (\r\n      <div className=\"header row flex-middle\">\r\n        <div className=\"col col-start\">\r\n          <div className=\"icon\" onClick={this.prevMonth}>\r\n            chevron_left\r\n          </div>\r\n        </div>\r\n        <div className=\"col col-center\">\r\n          <span>{dateFns.format(this.state.currentMonth, dateFormat)}</span>\r\n        </div>\r\n        <div className=\"col col-end\" onClick={this.nextMonth}>\r\n          <div className=\"icon\">chevron_right</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderDays() {\r\n    const dateFormat = \"dddd\";\r\n    const days = [];\r\n\r\n    let startDate = dateFns.startOfWeek(this.state.currentMonth);\r\n\r\n    for (let i = 0; i < 7; i++) {\r\n      days.push(\r\n        <div className=\"col col-center\" key={i}>\r\n          {dateFns.format(dateFns.addDays(startDate, i), dateFormat)}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return <div className=\"days row\">{days}</div>;\r\n  }\r\n\r\n  renderCells() {\r\n    const { currentMonth, selectedDate } = this.state;\r\n    const monthStart = dateFns.startOfMonth(currentMonth);\r\n    const monthEnd = dateFns.endOfMonth(monthStart);\r\n    const startDate = dateFns.startOfWeek(monthStart);\r\n    const endDate = dateFns.endOfWeek(monthEnd);\r\n\r\n    const dateFormat = \"D\";\r\n    const rows = [];\r\n\r\n    let days = [];\r\n    let day = startDate;\r\n    let formattedDate = \"\";\r\n\r\n    while (day <= endDate) {\r\n      for (let i = 0; i < 7; i++) {\r\n        formattedDate = dateFns.format(day, dateFormat);\r\n        const cloneDay = day;\r\n        days.push(\r\n          <div\r\n            className={`col cell ${!dateFns.isSameMonth(day, monthStart)\r\n                ? \"disabled\"\r\n                : dateFns.isSameDay(day, selectedDate) ? \"selected\" : \"\"\r\n              }`}\r\n            key={day}\r\n            onClick={() => this.onDateClick(dateFns.parse(cloneDay))}\r\n          >\r\n            <span className=\"number\">{formattedDate}</span>\r\n            <span className=\"bg\">{formattedDate}</span>\r\n          </div>\r\n        );\r\n        day = dateFns.addDays(day, 1);\r\n      }\r\n      rows.push(\r\n        <div className=\"row\" key={day}>\r\n          {days}\r\n        </div>\r\n      );\r\n      days = [];\r\n    }\r\n    return <div className=\"body\">{rows}</div>;\r\n  }\r\n\r\n  onDateClick = day => {\r\n    this.setState({\r\n      selectedDate: day\r\n    });\r\n  };\r\n\r\n  nextMonth = () => {\r\n    this.setState({\r\n      currentMonth: dateFns.addMonths(this.state.currentMonth, 1)\r\n    });\r\n  };\r\n\r\n  prevMonth = () => {\r\n    this.setState({\r\n      currentMonth: dateFns.subMonths(this.state.currentMonth, 1)\r\n    });\r\n  };\r\n\r\n  handleClick = (e) => {\r\n    BookingService.DateBooking(\r\n      this.state.selectedDate.getDate(),\r\n      this.state.selectedDate.getMonth(),\r\n      this.state.selectedDate.getFullYear()\r\n\r\n    ).then(response => {\r\n      console.log(response)\r\n      localStorage.setItem(\"date\", response.date)\r\n      window.location.replace(\"https://kittichat.github.io/userbooking\")\r\n    }\r\n      ,\r\n      error => {\r\n        const resMessage =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString();\r\n\r\n        this.setState({\r\n          successful: false,\r\n          message: resMessage\r\n        })\r\n        window.alert(\"Date selection is failed\")\r\n        window.location.reload()\r\n      }\r\n    )\r\n  }\r\n\r\n  render() {\r\n\r\n    let { selectedDate } = this.state;\r\n    console.log(selectedDate.getDate())\r\n\r\n    return (\r\n      <div className=\"calendar__background\">\r\n        <div className=\"calendar\">\r\n          {this.renderHeader()}\r\n          {this.renderDays()}\r\n          {this.renderCells()}\r\n\r\n        </div>\r\n\r\n        <button\r\n          className=\"Date__submit\"\r\n          onClick={() => { this.handleClick() }}\r\n        >\r\n          Submit\r\n          </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Calendar;\r\n"]},"metadata":{},"sourceType":"module"}